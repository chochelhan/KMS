"use strict";(self["webpackChunkkms"]=self["webpackChunkkms"]||[]).push([[5689],{5689:function(s,t,e){e.r(t),e.d(t,{default:function(){return k}});var i=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"login-container"},[e("p",{staticClass:"login-title"},[s._v("로그인")]),e("form",{staticClass:"w-full",attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),s.validate.apply(null,arguments)}}},[e("div",{staticClass:"input-box"},[e("div",{staticClass:"label"},[s._v("아이디")]),e("v-text-field",{attrs:{"error-messages":s.uidErrors,outlined:"",placeholder:"아이디를 입력해주세요"},on:{input:function(t){return s.$v.uid.$touch()},blur:function(t){return s.$v.uid.$touch()}},model:{value:s.uid,callback:function(t){s.uid=t},expression:"uid"}}),e("div",{staticClass:"label"},[s._v("비밀번호")]),e("v-text-field",{attrs:{type:"password",outlined:"","error-messages":s.upassErrors,placeholder:"비밀번호를 입력해주세요"},on:{input:function(t){return s.$v.upass.$touch()},blur:function(t){return s.$v.upass.$touch()}},model:{value:s.upass,callback:function(t){s.upass=t},expression:"upass"}})],1),e("div",{staticClass:"button-row"},[e("v-btn",{staticClass:"blackButton",attrs:{type:"submit"}},[s._v(" 로그인 ")])],1),e("div",{staticClass:"find-box"},[e("div",{staticClass:"right",on:{click:function(t){return s.findPass()}}},[s._v(" 계정찾기 ")])])]),s.snsList.length>0?e("div",{staticClass:"divide-line"}):s._e(),s.snsList.length>0?e("div",{staticClass:"sns-box"},[e("ul",{staticClass:"sns-ul"},s._l(s.snsList,(function(t){return e("li",{key:t.code,staticClass:"sns-li",on:{click:function(e){return s.snsLogin(t.code)}}},[e("img",{attrs:{src:t.img}}),e("span",[s._v(s._s(t.title))])])})),0)]):s._e(),e("div",{staticClass:"button-row",staticStyle:{width:"100%",margin:"auto","text-align":"center"}},[e("span",{staticClass:"guide"},[s._v("아직 하모니카 회원이 아니신가요?")]),e("span",{staticClass:"join-btn",on:{click:function(t){return s.$router.push("/joinIntro")}}},[s._v("회원가입")])])])},n=[],a=e(8620),r=e(379),o=e(9248),u=e(5494),c=e(3699),l=e(629),d={mixins:[a.oE],validations:{uid:{required:r.C1},upass:{required:r.C1}},name:"Login",computed:{...(0,l.Se)("config",["getSns","getSettingActive"]),uidErrors(){const s=[];return this.$v.uid.$dirty?(!this.$v.uid.required&&s.push("아이디를 입력하세요"),s):s},upassErrors(){const s=[];return this.$v.upass.$dirty?(!this.$v.upass.required&&s.push("비밀번호를 입력하세요"),s):s}},watch:{getSettingActive(s){s&&this.settingSns()}},data(){return{uid:"",upass:"",insertFlag:!1,snsList:[],snsCode:""}},created(){const s=c.Z.getSession();s&&s?.memberInfo?this.$router.push("/"):(this.$eventBus.$on("snsLoginResult",this.snsLoginResult),this.getSettingActive&&this.settingSns())},methods:{settingSns(){this.snsList=[];for(const s in this.getSns){let t="",i="";switch(s){case"gl":t=e(6645),i="구글로 로그인";break;case"fb":t=e(2013),i="페이스북으로 로그인";break;case"ka":t=e(9549),i="카카오톡으로 로그인";break;case"nv":t=e(1955),i="네이버로 로그인";break}if(this.getSns[s].key){let e={img:t,code:s,title:i};this.snsList.push(e)}}},snsLogin(s){this.snsCode=s;let t,e,i="";switch(s){case"ka":i=this.getSns[s].redirectUrl,t="https://kauth.kakao.com/oauth/authorize?response_type=code&client_id="+this.getSns[s].key+"&redirect_uri="+i,e="width=450,height=600,left=100,top=100";break;case"nv":i=this.snsInfo[s].redirectUrl,t="https://nid.naver.com/oauth2.0/authorize?response_type=code&client_id="+this.getSns[s].key+"&redirect_uri="+i,e="width=600,height=600,left=100,top=100";break;case"fb":i=this.snsInfo[s].redirectUrl,t="https://facebook.com/v2.11/dialog/oauth?client_id="+this.getSns[s].key+"&redirect_uri="+i,e="width=600,height=600,left=100,top=100";break}const n=window.open(t,"snsLoginWin",e);"localhost"==location.hostname&&setTimeout((()=>{n.postMessage("check","http://shop.riverflow.co.kr")}),1e3)},validate(){if(this.$v.$touch(),!this.$v.$anyError){const s={uid:this.uid,upass:this.upass};if(this.insertFlag)return;this.insertFlag=!0,this.$eventBus.$emit("overlay","open"),o.Z.post(u.AX,s,(s=>{this.$eventBus.$emit("overlay","hide");let t=s.status,e={};if("success"==t)c.Z.setSession(s),e={message:"로그인 되었습니다",doAction:()=>{location.href="/"}};else{let t=s.code,i="";switch(t){case"notauth":i="미인증된 회원입니다";break;case"uout":i="탈퇴한 회원 입니다";break;default:i="잘못된 아이디 또는 비밀번호입니다";break}this.insertFlag=!1,e={message:i}}this.$eventBus.$emit("modalOpen",e)}))}},findPass(){this.$router.push("/memberFindPass")},snsLoginResult(s){if(s){let t={};switch(s.status){case"login":c.Z.setSession(s.data),t={message:"로그인 되었습니다",doAction:()=>{location.href="/"}},this.$eventBus.$emit("modalOpen",t);break;case"message":t={message:"잘못된 접근입니다"},this.$eventBus.$emit("modalOpen",t);break;case"required":const e=s.data;e.joinType="sns",sessionStorage.setItem("nextMemberInfo",JSON.stringify(e)),this.$router.push("/memberJoin");break;case"agree":const i=s.data;i.joinType="sns",sessionStorage.setItem("tempMemberInfo",JSON.stringify(i)),this.$router.push("/joinAgree");break}}}},destroyed(){this.$eventBus.$off("snsLoginResult")}},h=d,p=e(1001),g=e(3453),v=e.n(g),f=e(3150),m=e(5978),b=(0,p.Z)(h,i,n,!1,null,"37a4759e",null),k=b.exports;v()(b,{VBtn:f.Z,VTextField:m.Z})}}]);
//# sourceMappingURL=5689.50736143.js.map