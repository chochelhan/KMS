"use strict";(self["webpackChunkkms"]=self["webpackChunkkms"]||[]).push([[7216],{17216:function(t,a,e){e.r(a),e.d(a,{default:function(){return D}});var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"search-container-layout"},[e("div",{staticClass:"search-container"},[t.keywordResult?e("div",{staticClass:"result-keyword-box"},[e("div",{staticClass:"keyword-text"},[e("span",[t._v('"'+t._s(t.keywordResult)+'"')]),t._v("에 대한 통합 검색결과가 "),e("br",{staticClass:"tablet-mobile-element"}),t._v("총 "),e("span",[t._v(t._s(t.totalCount)+"건")]),t._v(" 조회되었습니다 ")]),e("v-btn",{staticClass:"blackButton",on:{click:function(a){return t.totalSearchOpen()}}},[e("span",[t._v("상세검색")])])],1):t._e(),e("div",{staticClass:"article-total-box"},[e("ul",{staticClass:"tab"},[e("li",{class:t.totalActive,on:{click:function(a){return t.setTab("total")}}},[t._v("통합검색 ("+t._s(t.totalCount)+")")]),t._l(t.tabList,(function(a){return e("li",{class:a.active,on:{click:function(e){return t.setTab(a.code)}}},[t._v(" "+t._s(a.name)+" ("+t._s(t.util.numberFormat(a.data.total))+") ")])}))],2),e("ul",{staticClass:"board-container"},t._l(t.tabList,(function(a,i){return e("li",{staticClass:"board-item",attrs:{id:"tab-article-list-"+a.code}},[e("div",{staticClass:"board-name"},[t._v(" "+t._s(a.name)+" ("+t._s(t.util.numberFormat(a.data.total))+"건) ")]),a.data.list.length>0?e("div",{staticClass:"list-bottom-line"},[e("ul",{class:"article-container "+a.code},t._l(a.data.list,(function(i,s){return e("li",{on:{click:function(a){return t.articleView(i)}}},["img"!=a.code?e("div",{staticClass:"article-data"},["article"==a.code?e("div",{staticClass:"subject"},["no"==i.open?e("span",[e("font-awesome-icon",{staticStyle:{"font-size":"12px",color:"#666"},attrs:{icon:"fa-solid fa-lock"}})],1):t._e(),e("div",{staticClass:"subject-value",domProps:{innerHTML:t._s(i.subject)}})]):t._e(),"file"!=a.code?e("div",{staticClass:"desc",domProps:{innerHTML:t._s(i.content)}}):t._e(),"article"==a.code&&i.keywords?e("div",{staticClass:"keyword",domProps:{innerHTML:t._s(i.keywords)}}):t._e(),"file"==a.code?e("div",{staticClass:"file"},[t._v(" "+t._s(i.fileName)+" ")]):t._e(),e("div",{staticClass:"author"},[t._v(" 작성자"),e("span",{staticClass:"text"},[t._v(t._s(i.userName))]),t._v(" 작성일자"),e("span",{staticClass:"text"},[t._v(t._s(i.createAt.replace("T"," ").substring(1,16)))]),"comment"!=a.code?e("span",{staticClass:"pc-tablet-element"},[t._v("조회수"),e("span",{staticClass:"text"},[t._v(t._s(i.hit))])]):t._e()])]):"img"==a.code?e("div",{staticClass:"article-data"},[i.imgUrl?e("div",{staticClass:"img"},[e("img",{attrs:{src:i.imgUrl}})]):t._e(),e("div",{staticClass:"img-name"},[t._v(t._s(i.imgName))]),e("div",{staticClass:"author"},[t._v(" 작성자"),e("span",{staticClass:"text"},[t._v(t._s(i.userName))])])]):t._e()])})),0),e("paging",{attrs:{paging:a.data.paging,scrollNone:"yes",addPrams:{code:a.code},reload:a.data.pagingReload},on:{pageMove:t.pageBoardMode}})],1):e("div",{staticClass:"no-data"},[t._v(" 검색 결과가 없습니다 ")])])})),0)]),e("articleUpassComponent",{attrs:{bid:t.bid,articleId:t.articleId,modelOpen:t.passDialogShow},on:{upassSuccess:t.viewSuccess,parentOpenFalse:function(a){t.passDialogShow=!1}}}),e("v-dialog",{staticStyle:{"z-index":"100"},attrs:{width:"1300",persistent:"",rounded:""},model:{value:t.searchDialog,callback:function(a){t.searchDialog=a},expression:"searchDialog"}},[e("div",{staticClass:"modal-layout",staticStyle:{height:"800px",background:"#fff"}},[e("div",{staticClass:"modal-header"},[e("div",{staticClass:"modal-title"}),e("div",{staticClass:"modal-close",on:{click:function(a){t.searchDialog=!1}}},[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-circle-xmark"}})],1)]),e("div",{staticClass:"modal-body",attrs:{id:"articleView-container"}},[t.searchDialog?e("searchComponent",{attrs:{keyword:t.keyword}}):t._e()],1)])])],1)])},s=[],o=e(62032),l=e(4367),r=(e(74916),e(64765),e(41539),e(54747),e(39714),e(23123),e(69600),e(15306),e(89486)),n=e(25494),d=e(3699),c=e(1122),u=e(96965),g=e(20629),m=e(95158),h=e(17590),v=e(19755),p=e.n(v),f={name:"mainSearch",components:{articleUpassComponent:u.Z,searchComponent:m.Z,paging:h.Z},computed:(0,l.Z)({},(0,g.Se)("config",["getMenu","getSettingActive"])),watch:{getSettingActive:function(t){t&&this.getMcode()},searchDialog:function(t){t?p()("body").css("position","fixed"):p()("body").css("position","static")}},data:function(){return{util:c.Z,keyword:"",memberInfo:{},passDialogShow:!1,keywordResult:"",tabCode:"total",bid:"",searchDialog:!1,articleId:"",totalActive:"active",totalCount:0,tabList:[{name:"문서",code:"article",active:"",data:{total:0,list:[],page:1,paging:{},pagingReload:!1}},{name:"댓글",code:"comment",active:"",data:{total:0,list:[],page:1,paging:{},pagingReload:!1}},{name:"이미지",code:"img",active:"",data:{total:0,list:[],page:1,paging:{},pagingReload:!1}},{name:"파일",code:"file",active:"",data:{total:0,list:[],page:1,paging:{},pagingReload:!1}}],limit:10,page:1,total:0,paging:{},pagingReload:!1,boardIds:{}}},created:function(){this.$eventBus.$on("searchKeyword",this.eventSearch),this.keyword=this.$route.params.keyword;var t=d.Z.getSession();t&&t.memberInfo&&(this.memberInfo=t.memberInfo),this.getSettingActive&&this.getMcode(),this.search()},methods:{setTab:function(t){var a=this;"total"==t?(this.tabCode="total",this.totalActive="active",p()(".board-container .board-item").show()):(this.totalActive="",p()(".board-container .board-item").hide()),this.tabList.forEach((function(e){e.code==t?(e.active="active",a.tabCode=t,p()("#tab-article-list-"+t).show()):e.active=""}))},getMcode:function(){var t,a=(0,o.Z)(this.getMenu);try{for(a.s();!(t=a.n()).done;){var e=t.value;if("yes"==e.muse)if(e.subList&&e.subList.length>0){var i,s=(0,o.Z)(e.subList);try{for(s.s();!(i=s.n()).done;){var l=i.value;"yes"==l.muse&&("board"==l.linkType&&(this.boardIds[l.boardId]={mainCode:e.code,subCode:l.code}))}}catch(r){s.e(r)}finally{s.f()}}else"board"==e.linkType&&(this.boardIds[e.boardId]={mainCode:e.code})}}catch(r){a.e(r)}finally{a.f()}},totalSearchOpen:function(){this.searchDialog=!0},eventSearch:function(t){this.keyword=t.keyword,this.$router.push("/search/"+this.keyword).catch((function(){})),this.search()},search:function(){var t=this;if(this.keyword){var a=[];for(var e in this.boardIds)a.push(e);var i={keyword:this.keyword,searchBids:a,limit:this.limit.toString()};this.$eventBus.$emit("overlay","open"),this.tabList[0].data.page=1,this.tabList[1].data.page=1,this.tabList[2].data.page=1,this.tabList[3].data.page=1,this.page=1,this.serverFlag=!0,this.setTab("total"),r.Z.post(n.uk,i,(function(a){t.keywordResult=t.keyword,t.$eventBus.$emit("overlay","hide"),t.serverFlag=!1,"success"==a.status&&t.setAllDataList(a,"all")}))}},setAllDataList:function(t,a,e){var i,s=this,l=0,n=0,d=(0,o.Z)(this.tabList);try{var u=function(){var d=i.value;if("all"==a){switch(d.code){case"article":d.data.total=t.articleData.total,d.data.list=[];var u,g=(0,o.Z)(t.articleData.list);try{for(g.s();!(u=g.n()).done;){var m=u.value;if(m.content=c.Z.stripTagsNotEm(m.content),m.keywords){var h,v=m.keywords.split(","),p=[],f=(0,o.Z)(v);try{for(f.s();!(h=f.n()).done;){var b=h.value;-1!==b.indexOf(s.keyword)&&p.push(b.replace(b,"<em>"+s.keyword+"</em>"))}}catch(j){f.e(j)}finally{f.f()}p.length>0&&(m.keywords="#"+p.join(", #"))}d.data.list.push(m)}}catch(j){g.e(j)}finally{g.f()}d.data.paging={total:t.articleData.total,currentPage:d.data.page,limit:s.limit,pageGroup:10};break;case"comment":d.data.total=t.commentData.total,d.data.list=t.commentData.list,d.data.paging={total:t.commentData.total,currentPage:d.data.page,limit:s.limit,pageGroup:10};break;case"img":d.data.total=t.articleImageData.total,d.data.list=[];var y,C=(0,o.Z)(t.articleImageData.list);try{for(C.s();!(y=C.n()).done;){var w=y.value;if(w.imgs){var k,_=w.imgs.split(","),I=w.orgImgNames.split(","),D=w.searchImgNames.split(","),L="",S="",Z=0,$=(0,o.Z)(D);try{for($.s();!(k=$.n()).done;){var R=k.value;-1===R.indexOf(s.keywordResult)||L||(L=_[Z],S=I[Z]),Z++}}catch(j){$.e(j)}finally{$.f()}w.imgUrl=r.Z.imgHost+"api/controller/board/getArticleImage?imgName="+encodeURIComponent(L),w.imgName=S}d.data.list.push(w)}}catch(j){C.e(j)}finally{C.f()}d.data.paging={total:t.articleImageData.total,currentPage:d.data.page,limit:s.limit,pageGroup:10};break;case"file":d.data.total=t.articleFileData.total,d.data.list=[];var x,N=(0,o.Z)(t.articleFileData.list);try{for(N.s();!(x=N.n()).done;){var P=x.value;if(P.dfileOrgNames){var T,A=P.dfileOrgNames.split(","),B="",M=(0,o.Z)(A);try{for(M.s();!(T=M.n()).done;){var F=T.value;-1===F.indexOf(s.keywordResult)||B||(B=F)}}catch(j){M.e(j)}finally{M.f()}P.fileName=B}d.data.list.push(P)}}catch(j){N.e(j)}finally{N.f()}d.data.paging={total:t.articleFileData.total,currentPage:d.data.page,limit:s.limit,pageGroup:10};break}d.data.pagingReload=!0;var O=n;setTimeout((function(){d.data.pagingReload=!1,s.$set(s.tabList,O,d)}),500),l+=parseInt(d.data.total)}else if(d.code==a){d.data.total=t.resultData.total,d.data.list=t.resultData.list,d.data.paging={total:t.resultData.total,currentPage:e,limit:s.limit,pageGroup:10},d.data.pagingReload=!0;var V=n;setTimeout((function(){d.data.pagingReload=!1,s.$set(s.tabList,V,d)}),500),s.$set(s.tabList,n,d)}n++};for(d.s();!(i=d.n()).done;)u()}catch(g){d.e(g)}finally{d.f()}this.totalCount=c.Z.numberFormat(l)},articleView:function(t){var a=!1;if(t.subject){if("no"==t.open)if("ROLE_ADMIN"==this.memberInfo.role)a=!0;else{if(!t.userId)return this.articleId=t.id,this.bid=t.bid,void(this.passDialogShow=!0);t.userId==this.memberInfo.uid&&(a=!0)}else a=!0;if(a){var e;this.page,this.category;if(null!==(e=this.boardIds[t.bid])&&void 0!==e&&e.mainCode){var i=this.boardIds[t.bid].subCode?this.boardIds[t.bid].subCode:"none";this.$router.push("/board/articleView/"+this.boardIds[t.bid].mainCode+"/"+i+"/"+t.id)}}}else this.commentDetail(t)},commentDetail:function(t){var a;if(null!==(a=this.boardIds[t.bid])&&void 0!==a&&a.mainCode){sessionStorage.setItem("viewComment",t.id);var e=this.boardIds[t.bid].subCode?this.boardIds[t.bid].subCode:"none";this.$router.push("/board/articleView/"+this.boardIds[t.bid].mainCode+"/"+e+"/"+t.parentId)}},viewSuccess:function(){var t;this.page,this.category;if(null!==(t=this.boardIds[this.bid])&&void 0!==t&&t.mainCode){var a=this.boardIds[this.bid].subCode?this.boardIds[this.bid].subCode:"none";this.$router.push("/board/articleView/"+this.boardIds[this.bid].mainCode+"/"+a+"/"+this.articleId)}},pageBoardMode:function(t){this.searchPart(t)},searchPart:function(t){var a=this,e=[];for(var i in this.boardIds)e.push(i);var s={keyword:this.keywordResult,searchBids:e,code:t.addParams.code,page:t.page.toString(),limit:this.limit.toString()};this.$eventBus.$emit("overlay","open"),this.serverFlag=!0,r.Z.post(n.Am,s,(function(e){if(a.$eventBus.$emit("overlay","hide"),a.serverFlag=!1,"success"==e.status){var i,s=0,l=(0,o.Z)(a.tabList);try{var r=function(){var o=i.value;if(o.code==t.addParams.code){o.data.total=e.resultData.total,o.data.list=e.resultData.list,o.data.paging={total:e.resultData.total,currentPage:t.page,limit:a.limit,pageGroup:10},o.data.pagingReload=!0;var l=s;setTimeout((function(){o.data.pagingReload=!1,a.$set(a.tabList,l,o)}),500),a.$set(a.tabList,s,o)}s++};for(l.s();!(i=l.n()).done;)r()}catch(n){l.e(n)}finally{l.f()}}}))}},beforeDestroy:function(){this.$eventBus.$off("searchKeyword")},updated:function(){p()(".subject em").css({color:"#C51162","font-weight":"bold","font-size":"18px","font-style":"normal"}),p()(".desc em").css({color:"#C51162","font-weight":"bold","font-style":"normal"}),p()(".keyword em").css({color:"#C51162","font-weight":"bold","font-style":"normal"})}},b=f,y=e(1001),C=e(43453),w=e.n(C),k=e(63150),_=e(96662),I=(0,y.Z)(b,i,s,!1,null,"95d80a8a",null),D=I.exports;w()(I,{VBtn:k.Z,VDialog:_.Z})}}]);
//# sourceMappingURL=7216-legacy.22d60542.js.map